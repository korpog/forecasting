holidays |>
gg_subseries(Trips) +
labs(y = "Overnight trips ('000)",
title = "Australian domestic holidays")
vic_elec |>
filter(year(Time) == 2014) |>
ggplot(aes(x = Temperature, y = Demand)) +
geom_point() +
labs(x = "Temperature (degrees Celsius)",
y = "Electricity demand (GW)")
visitors |>
pivot_wider(values_from=Trips, names_from=State) |>
GGally::ggpairs(columns = 2:9)
visitors <- tourism |>
group_by(State) |>
summarise(Trips = sum(Trips))
visitors |>
ggplot(aes(x = Quarter, y = Trips)) +
geom_line() +
facet_grid(vars(State), scales = "free_y") +
labs(title = "Australian domestic tourism",
y= "Overnight trips ('000)")
visitors |>
pivot_wider(values_from=Trips, names_from=State) |>
GGally::ggpairs(columns = 2:9)
recent_production <- aus_production |>
filter(year(Quarter) >= 2000)
library(fpp3)
recent_production <- aus_production |>
filter(year(Quarter) >= 2000)
recent_production |>
gg_lag(Beer, geom = "point") +
labs(x = "lag(Beer, k)")
# 2.8
recent_production |> ACF(Beer, lag_max = 9)
recent_production |>
ACF(Beer) |>
autoplot() + labs(title="Australian beer production")
a10 |>
ACF(Cost, lag_max = 48) |>
autoplot() +
labs(title="Australian antidiabetic drug sales")
set.seed(30)
y <- tsibble(sample = 1:50, wn = rnorm(50), index = sample)
y |> autoplot(wn) + labs(title = "White noise", y = "")
y |>
ACF(wn) |>
autoplot() + labs(title = "White noise")
# 2.10
aus_production$Bricks
# 2.10
?aus_production$Bricks
# 2.10
?aus_production
# 2.10
aus_production
?pelt
?gafa_stock
?vic_elec
bricks <- aus_production |>
select(Bricks)
bricks <- autoplot()
autoplot(bricks)
autoplot(bricks) + labs(title = "Bricks")
lynx <- pelt |>
select(Lynx)
autoplot(lynx) + labs(title = "Lynx")
bricks <- aus_production |>
select(Bricks)
autoplot(bricks, Bricks) + labs(title = "Bricks")
autoplot(aus_production, Bricks) + labs(title = "Bricks")
autoplot(pelt, Lynx) + labs(title = "Lynx")
autoplot(gafa_stock, Close) + labs(title = "Close")
autoplot(vic_elec, Demand) + labs(title = "Electricity Demand", x = "Date", y = "Electricity [MWh]")
autoplot(gafa_stock, Close) + labs(title = "Close")
library(fpp3)
setwd("/home/korpog/Documents/prog3/forecasting")
aus_livestock
source("~/Documents/prog3/forecasting/chap2.R")
aus_livestock |>
filter(
State == "Victoria",
Animals == "Pigs",
between(year(Month), 1990, 1995)
) -> pigs
aus_livestock |>
filter(
State == "Victoria",
Animal == "Pigs",
between(year(Month), 1990, 1995)
) -> pigs
pigs
View(pigs)
pigs |> autoplot()
pigs |> ACF(lag_max = 24)
pigs |> ACF(Count, lag_max = 24)
pigs |>
ACF(Count, lag_max = 24) |>
autoplot()
dgoog <- gafa_stock |>
filter(Symbol == "GOOG", year(Date) >= 2018) |>
mutate(trading_day = row_number()) |>
update_tsibble(index = trading_day, regular = TRUE) |>
mutate(diff = difference(Close))
View(dgoog)
dgoog |> autoplot(diff)
dgoog |>
ACF(diff, lag_max = 30) |>
autoplot()
library(fpp3)
setwd("/home/korpog/Documents/prog3/forecasting")
gc()
install.packages("IRkernel", dependencies = FALSE)
global_economy |>
filter(Country == "Australia") |>
autoplot(GDP/Population) +
labs(title= "GDP per capita", y = "$US")
print_retail <- aus_retail |>
filter(Industry == "Newspaper and book retailing") |>
group_by(Industry) |>
index_by(Year = year(Month)) |>
summarise(Turnover = sum(Turnover))
aus_economy <- global_economy |>
filter(Code == "AUS")
View(aus_economy)
View(print_retail)
print_retail |>
left_join(aus_economy, by = "Year") |>
mutate(Adjusted_turnover = Turnover / CPI * 100) |>
pivot_longer(c(Turnover, Adjusted_turnover),
values_to = "Turnover") |>
mutate(name = factor(name,
levels=c("Turnover","Adjusted_turnover"))) |>
ggplot(aes(x = Year, y = Turnover)) +
geom_line() +
facet_grid(name ~ ., scales = "free_y") +
labs(title = "Turnover: Australian print media industry",
y = "$AU")
lambda <- aus_production |>
features(Gas, features = guerrero) |>
pull(lambda_guerrero)
aus_production |>
autoplot(box_cox(Gas, lambda)) +
labs(y = "",
title = latex2exp::TeX(paste0(
"Transformed gas production with $\\lambda$ = ",
round(lambda,2))))
install.packages("latex2exp", dependencies = FALSE)
aus_production |>
autoplot(box_cox(Gas, lambda)) +
labs(y = "",
title = latex2exp::TeX(paste0(
"Transformed gas production with $\\lambda$ = ",
round(lambda,2))))
us_retail_employment <- us_employment |>
filter(year(Month) >= 1990, Title == "Retail Trade") |>
select(-Series_ID)
autoplot(us_retail_employment, Employed) +
labs(y = "Persons (thousands)",
title = "Total employment in US retail")
dcmp <- us_retail_employment |>
model(stl = STL(Employed))
components(dcmp)
View(dcmp)
components(dcmp) |>
as_tsibble() |>
autoplot(Employed, colour="gray") +
geom_line(aes(y=trend), colour = "#D55E00") +
labs(
y = "Persons (thousands)",
title = "Total employment in US retail"
)
components(dcmp) |> autoplot()
components(dcmp) |>
as_tsibble() |>
autoplot(Employed, colour = "gray") +
geom_line(aes(y=season_adjust), colour = "#0072B2") +
labs(y = "Persons (thousands)",
title = "Total employment in US retail")
global_economy |>
filter(Country == "Australia") |>
autoplot(Exports) +
labs(y = "% of GDP", title = "Total Australian exports")
aus_exports <- global_economy |>
filter(Country == "Australia") |>
mutate(
`5-MA` = slider::slide_dbl(Exports, mean,
.before = 2, .after = 2, .complete = TRUE
)
)
aus_exports |>
autoplot(Exports) +
geom_line(aes(y = `5-MA`), colour = "#D55E00") +
labs(y = "% of GDP",
title = "Total Australian exports")
beer <- aus_production |>
filter(year(Quarter) >= 1992) |>
select(Quarter, Beer)
beer_ma <- beer |>
mutate(
`4-MA` = slider::slide_dbl(Beer, mean,
.before = 1, .after = 2, .complete = TRUE),
`2x4-MA` = slider::slide_dbl(`4-MA`, mean,
.before = 1, .after = 0, .complete = TRUE)
)
beer <- aus_production |>
filter(year(Quarter) >= 1992) |>
select(Quarter, Beer)
beer_ma <- beer |>
mutate(
`4-MA` = slider::slide_dbl(Beer, mean,
.before = 1, .after = 2, .complete = TRUE),
`2x4-MA` = slider::slide_dbl(`4-MA`, mean,
.before = 1, .after = 0, .complete = TRUE)
)
View(beer_ma)
us_retail_employment_ma <- us_retail_employment |>
mutate(
`12-MA` = slider::slide_dbl(Employed, mean,
.before = 5, .after = 6, .complete = TRUE),
`2x12-MA` = slider::slide_dbl(`12-MA`, mean,
.before = 1, .after = 0, .complete = TRUE)
)
?us_retail
us_retail_employment <- us_employment |>
filter(year(Month) >= 1990, Title == "Retail Trade") |>
select(-Series_ID)
autoplot(us_retail_employment, Employed) +
labs(
y = "Persons (thousands)",
title = "Total employment in US retail"
)
us_retail_employment_ma <- us_retail_employment |>
mutate(
`12-MA` = slider::slide_dbl(Employed, mean,
.before = 5, .after = 6, .complete = TRUE),
`2x12-MA` = slider::slide_dbl(`12-MA`, mean,
.before = 1, .after = 0, .complete = TRUE)
)
us_retail_employment_ma |>
autoplot(Employed, colour = "gray") +
geom_line(aes(y = `2x12-MA`), colour = "#D55E00") +
labs(y = "Persons (thousands)",
title = "Total employment in US retail")
